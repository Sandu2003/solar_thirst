<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reply to Complaints</title>
    <link rel="stylesheet" href="com.css">
</head>
<body>
    <header>
        <div class="header-left">
            <img class="logo" src="../assests/logo.png" alt="Company Logo">
        </div>
        <div class="header-right">
            <p>⚙️Admin</p>
        </div>
    </header>
    
    <div class="sidebar">
        <h2>Organization Dashboard</h2>
        <nav>
            <ul>
                <li><a href="../customer_d_org/cu_data.html">Customer Data</a></li>
                <li><a href="../quotation_send_org/quotation_send.html">Send Quotation</a></li>
                <li><a href="../complaints_org/complaints.html">Reply to Complaints</a></li>
                <li><a href="../up-down_grade_org/up.html">Upgrade/Downgrade Requests</a></li>
                <li><a href="../process_org/process.html">Process Flow</a></li>
            </ul>
        </nav>
    </div>

    <div class="content">
        <h2>Reply to Complaints</h2>
        <p>Here, you can view customer complaints and respond to them. Each complaint is listed by the user's username for better identification.</p>
        
        <!-- Complaint Table -->
        <h3>Customer Complaints</h3>
        <table class="complaints-table">
            <thead>
                <tr>
                    <th>Complaint ID</th>
                    <th>Username</th>
                    <th>Complaint</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <!-- Example Complaints -->
                <tr>
                    <td>101</td>
                    <td>john_doe</td>
                    <td>My solar installation is not working as expected.</td>
                    <td><button class="reply-btn" data-complaint-id="101">Reply</button></td>
                </tr>
                <tr>
                    <td>102</td>
                    <td>mary_smith</td>
                    <td>Service was delayed, and I haven't received an update.</td>
                    <td><button class="reply-btn" data-complaint-id="102">Reply</button></td>
                </tr>
            </tbody>
        </table>

        <!-- Reply Form -->
        <div id="reply-section" style="display: none;">
            <h3>Respond to Complaint</h3>
            <form id="replyForm" method="POST">
                <label for="complaint-id">Complaint ID</label>
                <input type="text" id="complaint-id" name="complaint-id" readonly>

                <label for="response">Your Reply</label>
                <textarea id="response" name="response" required></textarea>

                <button type="submit" class="reply-submit-btn">Send Reply</button>
            </form>

            <!-- Success Message -->
            <div id="successMessage" style="display: none; padding: 20px; background-color: #4CAF50; color: white; border-radius: 5px;">
                <h3>Message Sent Successfully!</h3>
            </div>
        </div>
    </div>

    <script>
        // Handle "Reply" button click to show the reply form
        const replyButtons = document.querySelectorAll('.reply-btn');
        const replySection = document.getElementById('reply-section');
        const complaintIdInput = document.getElementById('complaint-id');
        const successMessage = document.getElementById('successMessage');

        replyButtons.forEach(button => {
            button.addEventListener('click', function() {
                // Set the complaint ID in the form input
                complaintIdInput.value = this.getAttribute('data-complaint-id');
                // Show the reply form
                replySection.style.display = 'block';
                successMessage.style.display = 'none'; // Hide success message if form is reopened
            });
        });

        // Handle form submission
        document.getElementById('replyForm').addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent default form submission

            // Hide the reply form and show success message
            replySection.style.display = 'none';
            successMessage.style.display = 'block';

            // Optionally, reset the form
            document.getElementById('replyForm').reset();
        });
    </script>
</body>
</html>
